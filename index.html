<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜é›„å¾®é†ºä¹‹æ—… 12/19-12/22</title>
    <style>
        :root {
            --primary: #2c3e50;
            --active: #e67e22; /* æ©˜è‰²äº®é» */
            --bg: #f3f4f6;
            --card-bg: #ffffff;
            --text: #333;
            --note: #666;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 0;
            line-height: 1.6;
            padding-bottom: 50px;
        }

        /* é ‚éƒ¨å°èˆªå€ */
        .app-header {
            background: #fff;
            padding: 20px 20px 0 20px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .header-title {
            text-align: center;
            margin-bottom: 15px;
        }
        
        .header-title h1 { margin: 0; font-size: 1.5rem; color: var(--primary); }
        .header-title p { margin: 5px 0 0; font-size: 0.85rem; color: #888; }

        /* åˆ†é æ¨™ç±¤ Tabs */
        .tabs-container {
            display: flex;
            justify-content: space-around;
            max-width: 800px;
            margin: 0 auto;
            overflow-x: auto; /* æ‰‹æ©Ÿç‰ˆå¯æ©«æ»‘ */
        }

        .tab-btn {
            flex: 1;
            text-align: center;
            padding: 15px 10px;
            cursor: pointer;
            font-weight: bold;
            color: #888;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
            white-space: nowrap;
            font-size: 0.95rem;
        }

        .tab-btn:hover { color: var(--primary); }
        
        .tab-btn.active {
            color: var(--active);
            border-bottom: 3px solid var(--active);
        }

        .tab-date { display: block; font-size: 1.1rem; }
        .tab-day { font-size: 0.8rem; font-weight: normal; }

        /* å…§å®¹å€ */
        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 0 20px;
        }

        /* å¡ç‰‡æ¨£å¼ */
        .day-info {
            background: #fff;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 20px;
            border-left: 5px solid var(--primary);
            box-shadow: var(--shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .day-info h2 { margin: 0; font-size: 1.2rem; }
        .reset-btn {
            font-size: 0.75rem;
            color: #999;
            background: none;
            border: 1px solid #ddd;
            padding: 2px 8px;
            border-radius: 4px;
            cursor: pointer;
        }

        .timeline { position: relative; padding-left: 10px; }
        
        /* äº‹ä»¶å¡ç‰‡ */
        .event-card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: var(--shadow);
            position: relative;
            border-left: 5px solid #ddd;
            transition: transform 0.2s;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* æ ¹æ“šé¡å‹è®Šè‰² */
        .event-card.type-food { border-left-color: #e74c3c; } /* åƒ */
        .event-card.type-chill { border-left-color: #9b59b6; } /* é…’/æ”¾é¬† */
        .event-card.type-art { border-left-color: #3498db; } /* å±•è¦½ */
        .event-card.type-music { border-left-color: #f1c40f; } /* éŸ³æ¨‚ */
        .event-card.type-transport { border-left-color: #95a5a6; } /* äº¤é€š/ä½å®¿ */

        .event-header { display: flex; align-items: flex-start; }
        
        .time-box {
            font-family: 'Courier New', monospace;
            font-weight: bold;
            color: var(--active);
            font-size: 1.1rem;
            min-width: 60px;
            margin-right: 10px;
        }

        .content-box { flex-grow: 1; }
        .event-title { font-weight: bold; font-size: 1.1rem; margin-bottom: 4px; color: #2c3e50; }
        .event-note { font-size: 0.9rem; color: var(--note); white-space: pre-wrap; line-height: 1.5; }

        /* ç·¨è¼¯èˆ‡æ“ä½œæŒ‰éˆ• */
        .actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 10px;
            opacity: 0.4;
            transition: opacity 0.2s;
        }
        .event-card:hover .actions { opacity: 1; }

        button.icon-btn {
            background: #f8f9fa; border: 1px solid #ddd;
            cursor: pointer; padding: 4px 10px; border-radius: 4px;
            font-size: 0.8rem; color: #555;
        }
        button.icon-btn:hover { background: #e2e6ea; }
        button.delete-btn:hover { background: #ffebee; color: #c62828; border-color: #ef9a9a; }

        /* ç·¨è¼¯æ¨¡å¼è¼¸å…¥æ¡† */
        .editing input, .editing textarea {
            width: 100%; box-sizing: border-box;
            padding: 8px; margin-bottom: 8px;
            border: 1px solid #ddd; border-radius: 4px;
            font-size: 1rem;
        }
        .edit-controls { display: flex; gap: 10px; }
        .save-btn { background: var(--primary); color: white; border: none; padding: 6px 15px; border-radius: 4px; cursor: pointer; }
        .cancel-btn { background: #ddd; color: #333; border: none; padding: 6px 15px; border-radius: 4px; cursor: pointer; }

        /* æ–°å¢æŒ‰éˆ• */
        .add-btn {
            width: 100%;
            padding: 12px;
            background: white;
            border: 2px dashed #ccc;
            border-radius: 12px;
            color: #888;
            cursor: pointer;
            font-size: 1rem;
            transition: 0.2s;
        }
        .add-btn:hover { border-color: var(--active); color: var(--active); background: #fffaf0; }

        /* æ‰‹æ©Ÿé©é… */
        @media (max-width: 600px) {
            .tab-date { font-size: 0.9rem; }
            .tab-day { display: none; } /* æ‰‹æ©Ÿç‰ˆéš±è— "Day X" å­—æ¨£ */
            .event-header { flex-direction: column; }
            .time-box { margin-bottom: 5px; }
        }
    </style>
</head>
<body>

    <div class="app-header">
        <div class="header-title">
            <h1>ğŸ¹ é«˜é›„å¾®é†ºä¹‹æ—…</h1>
            <p>12/19 - 12/22ï½œéŸ³æ¨‚ï¼å±•è¦½ï¼Chill</p>
        </div>
        <div class="tabs-container" id="tabs-container">
            </div>
    </div>

    <div class="container">
        <div id="day-content">
            </div>
        
        <div style="text-align: center; margin-top: 40px; border-top: 1px solid #ddd; padding-top: 20px;">
            <button class="reset-btn" onclick="resetData()">â†º é‡ç½®å›é è¨­è¡Œç¨‹</button>
        </div>
    </div>

<script>
    // é è¨­è¡Œç¨‹è³‡æ–™
    const defaultData = [
        {
            date: "12/19",
            dayName: "Day 1 (äº”)",
            title: "æŠµé”èˆ‡å…§æƒŸæ•£ç­–",
            events: [
                { time: "14:00", type: "transport", title: "ğŸš„ æŠµé”é«˜é›„å·¦ç‡Ÿé«˜éµ", note: "å‰å¾€èœœæ¡ƒå®¶æ”¾è¡Œæ" },
                { time: "16:00", type: "art", title: "ğŸ›ï¸ å…§æƒŸè—è¡“ä¸­å¿ƒ", note: "ç´”ç™½å»ºç¯‰ç¾æ‹ï¼Œé€›é¸ç‰©åº—èˆ‡é›»å½±é™¢ã€‚" },
                { time: "18:00", type: "food", title: "ğŸ½ï¸ DDC é¤é…’é¤¨", note: "Double Soul æ–°å“ç‰Œï¼Œæ°£æ°›ä½³ï¼Œå‹™å¿…è¨‚ä½ã€‚" },
                { time: "20:00", type: "chill", title: "ğŸ’¼ å—å–ƒ Nan Nan (å·¥ä½œ)", note: "ç’°å¢ƒ Chillï¼Œé©åˆå–ä¸€æ¯å·¥ä½œã€‚" },
                { time: "22:30", type: "food", title: "ğŸŒ™ è‡ªå¼·å¤œå¸‚", note: "å—è±é­¯è‚‰é£¯ã€ç™½ç³–ç²¿ã€æ°´é¤ƒå®µå¤œå ´ã€‚" },
                { time: "23:30", type: "chill", title: "ğŸ¸ æµªéš› WAVESTELLAR æˆ– OFFLINE", note: "æµªéš›çœ‹æ¸¯é‚Šå¤œæ™¯ / OFFLINE å–èŒ¶é…’ã€‚" },
                { time: "æ·±å¤œ", type: "transport", title: "ğŸ  å®¿ï¼šèœœæ¡ƒå®¶", note: "" }
            ]
        },
        {
            date: "12/20",
            dayName: "Day 2 (å…­)",
            title: "æ¸¯éƒ½å‹•ç‰©åœ’ & è–èª•è½åœ˜",
            events: [
                { time: "11:00", type: "chill", title: "ğŸ¦ å£½å±±å‹•ç‰©åœ’", note: "çœ‹æ°´è±šã€æ­å°ç«è»Š (é¿é–‹é–‰åœ’å‰äººæ½®)ã€‚" },
                { time: "15:00", type: "food", title: "ğŸ§ é¹½åŸ•ç¬¬ä¸€å…¬æœ‰å¸‚å ´", note: "ç©ºè…¹èŸ²ã€èŠèŠç”œå®¤ï¼Œè€å¸‚å ´ç¿»æ–°æ°›åœã€‚" },
                { time: "16:30", type: "art", title: "ğŸ§± é§äºŒ & å¤§æ¸¯æ©‹ & é«˜æµ", note: "æ²¿è‘—æ¸¯é‚Šæ•£æ­¥ï¼Œæ‹é»ƒæ˜è—èª¿æ™‚åˆ»ã€‚" },
                { time: "18:30", type: "food", title: "ğŸ½ï¸ ä¸­å¤®å…¬åœ’é™„è¿‘æ™šé¤", note: "è€äºŒè…¿åº«é£¯æˆ–æ–°å´›æ±Ÿç¾é£Ÿã€‚" },
                { time: "19:30", type: "music", title: "ğŸ„ ä¸­å¤®å…¬åœ’è½åœ˜", note: "2025è–èª•ç”Ÿæ´»ç¯€ã€‚" },
                { time: "22:00", type: "chill", title: "ğŸ¥ƒ OFFLINE Tea & Wine Bar", note: "èŒ¶é…’é¤¨ï¼Œç‰¹èª¿éå¸¸æœ‰æ°´æº– (è‹¥æ˜¨æ™šæ²’å»)ã€‚" },
                { time: "æ·±å¤œ", type: "transport", title: "ğŸ  å®¿ï¼šèœœæ¡ƒå®¶", note: "" }
            ]
        },
        {
            date: "12/21",
            dayName: "Day 3 (æ—¥)",
            title: "Doja Cat ä¹‹å¤œ",
            events: [
                { time: "09:00", type: "food", title: "ğŸ¥¯ æ—©é¤ï¼šèˆˆéš†å±…", note: "å¿…é»æ¹¯åŒ…ã€ç‡’é¤…æ²¹æ¢ (éœ€æ’éšŠ)ã€‚" },
                { time: "10:30", type: "transport", title: "ğŸš• ç§»å‹•å»åŒ—é«˜é›„", note: "åˆ°ä»Šæ™šæ—…é¤¨æ”¾è¡Œæã€‚" },
                { time: "12:00", type: "food", title: "ğŸ¥Ÿ åŒ—å¹³æ¥Šå¯¶å¯¶è’¸é¤ƒ", note: "ç‰›è‚‰æ²é¤…è·Ÿé›æ¹¯å¿…é»ï¼(å³æ˜Œ/æ¥ æ¢“)" },
                { time: "14:00", type: "chill", title: "ğŸ² è“®æ± æ½­ & é¾è™å¡”", note: "å‘¨é‚Šèµ°èµ° (ç•™æ„é¾è™å¡”æ•´ä¿®ç‹€æ³)ã€‚" },
                { time: "16:00", type: "transport", title: "ğŸ¨ å›æ—…é¤¨ä¼‘æ¯ / æ¢³æ´—", note: "" },
                { time: "18:30", type: "music", title: "ğŸ¤ MO å‰å¾€ Doja Cat æ¼”å”±æœƒ", note: "åœ°é»ï¼šé«˜é›„å·¨è›‹" },
                { time: "19:00", type: "chill", title: "ğŸš¶ å¤šå¤šè‡ªç”±æ´»å‹•æ™‚é–“", note: "A: æŒ‰æ‘©(ä¸è€æ¾/æµ®å®®)\nB: é€›æ¼¢ç¥å·¨è›‹\nC: ç¨é£²(Inn Bistro)" },
                { time: "22:30", type: "food", title: "ğŸ¢ ç‘è±å¤œå¸‚", note: "æ•£å ´é›†åˆã€‚æ¨è–¦ï¼šå¤©ä½¿é›æ’ã€è¬åœ‹ç‰›æ’ã€QQè›‹ã€‚" },
                { time: "æ·±å¤œ", type: "transport", title: "ğŸ¨ å®¿ï¼šå·¨è›‹å‘¨é‚Šæ—…é¤¨", note: "" }
            ]
        },
        {
            date: "12/22",
            dayName: "Day 4 (ä¸€)",
            title: "å“†å•¦Aå¤¢ & å®Œç¾å¥é»",
            events: [
                { time: "10:00", type: "art", title: "ğŸ–¼ï¸ ã€ŠTHE å“†å•¦Aå¤¢å±•ã€‹", note: "åœ°é»ï¼šç§‘å·¥é¤¨ (é ç•™2-3å°æ™‚)ã€‚" },
                { time: "13:00", type: "food", title: "ğŸ½ï¸ åˆé¤ï¼šç§‘å·¥é¤¨å‘¨é‚Š", note: "é†‰ä¾¿å®œæ—¥å¼å¿«é¤ (è…¿åº«/é›è…¿é£¯)ã€‚" },
                { time: "14:30", type: "chill", title: "â˜• è¡Œç¨‹ä¸‰é¸ä¸€", note: "1. è¡›æ­¦ç‡Ÿ (å»ºç¯‰/æ•£æ­¥)\n2. æœè²¿ç¤¾å€ (æ‹ç…§/çœ·æ‘å‘³)\n3. R.E æ‰‹æ²–å’–å•¡ (è¿‘é«˜éµ/ä¼‘æ¯)" },
                { time: "16:30", type: "transport", title: "ğŸš„ å‰å¾€å·¦ç‡Ÿé«˜éµç«™", note: "" },
                { time: "17:00", type: "transport", title: "ğŸ‘‹ æ­è»Šå›å°åŒ—", note: "å¹³å®‰è³¦æ­¸ã€‚" }
            ]
        }
    ];

    let itineraryData = [];
    let currentDayIndex = 0; // ç•¶å‰é¸æ“‡çš„æ—¥æœŸç´¢å¼•

    // åˆå§‹åŒ–
    function init() {
        const saved = localStorage.getItem('kh_trip_v2');
        if (saved) {
            itineraryData = JSON.parse(saved);
        } else {
            itineraryData = JSON.parse(JSON.stringify(defaultData));
        }
        renderTabs();
        renderContent();
    }

    function saveData() {
        localStorage.setItem('kh_trip_v2', JSON.stringify(itineraryData));
        renderContent(); // è³‡æ–™è®Šæ›´å¾Œé‡æ–°æ¸²æŸ“å…§å®¹
    }

    function resetData() {
        if(confirm('ç¢ºå®šè¦åˆªé™¤ä¿®æ”¹ï¼Œé‡ç½®å›åŸå§‹è¡Œç¨‹å—ï¼Ÿ')) {
            localStorage.removeItem('kh_trip_v2');
            location.reload();
        }
    }

    // åˆ‡æ›æ—¥æœŸ
    function switchTab(index) {
        currentDayIndex = index;
        renderTabs(); // æ›´æ–° Tab æ¨£å¼
        renderContent(); // æ›´æ–°å…§å®¹
    }

    // æ¸²æŸ“ Tabs
    function renderTabs() {
        const container = document.getElementById('tabs-container');
        container.innerHTML = '';
        
        itineraryData.forEach((day, index) => {
            const btn = document.createElement('div');
            btn.className = `tab-btn ${index === currentDayIndex ? 'active' : ''}`;
            btn.onclick = () => switchTab(index);
            btn.innerHTML = `
                <span class="tab-date">${day.date}</span>
                <span class="tab-day">${day.dayName.split(' ')[0]}</span>
            `;
            container.appendChild(btn);
        });
    }

    // æ¸²æŸ“ç•¶å‰æ—¥æœŸçš„å…§å®¹
    function renderContent() {
        const container = document.getElementById('day-content');
        container.innerHTML = '';

        const day = itineraryData[currentDayIndex];

        // æ—¥æœŸæ¨™é¡Œå¡ç‰‡
        const infoCard = document.createElement('div');
        infoCard.className = 'day-info';
        infoCard.innerHTML = `
            <div>
                <h2>${day.title}</h2>
                <div style="font-size:0.9rem; color:#666;">${day.dayName}</div>
            </div>
        `;
        container.appendChild(infoCard);

        // äº‹ä»¶åˆ—è¡¨
        const timeline = document.createElement('div');
        timeline.className = 'timeline';

        day.events.forEach((event, eventIndex) => {
            const card = document.createElement('div');
            card.className = `event-card type-${event.type || 'chill'}`;

            if (event.isEditing) {
                // ç·¨è¼¯æ¨¡å¼
                card.classList.add('editing');
                card.innerHTML = `
                    <input type="text" id="edit-time" value="${event.time}" placeholder="æ™‚é–“ (ä¾‹å¦‚ 14:00)">
                    <input type="text" id="edit-title" value="${event.title}" placeholder="æ¨™é¡Œ">
                    <textarea id="edit-note" rows="3" placeholder="å‚™è¨»">${event.note}</textarea>
                    <div class="edit-controls">
                        <button class="save-btn" onclick="saveEdit(${eventIndex})">å„²å­˜</button>
                        <button class="cancel-btn" onclick="cancelEdit(${eventIndex})">å–æ¶ˆ</button>
                    </div>
                `;
            } else {
                // é¡¯ç¤ºæ¨¡å¼
                card.innerHTML = `
                    <div class="event-header">
                        <div class="time-box">${event.time}</div>
                        <div class="content-box">
                            <div class="event-title">${event.title}</div>
                            <div class="event-note">${event.note}</div>
                        </div>
                    </div>
                    <div class="actions">
                        <button class="icon-btn" onclick="toggleEdit(${eventIndex})">âœï¸</button>
                        <button class="icon-btn delete-btn" onclick="deleteItem(${eventIndex})">ğŸ—‘ï¸</button>
                    </div>
                `;
            }
            timeline.appendChild(card);
        });

        // æ–°å¢æŒ‰éˆ•
        const addBtn = document.createElement('button');
        addBtn.className = 'add-btn';
        addBtn.innerHTML = 'â• æ–°å¢æ­¤æ—¥è¡Œç¨‹';
        addBtn.onclick = () => addItem();
        timeline.appendChild(addBtn);

        container.appendChild(timeline);
    }

    // --- é‚è¼¯æ“ä½œå‡½æ•¸ ---

    function toggleEdit(eventIndex) {
        itineraryData[currentDayIndex].events[eventIndex].isEditing = true;
        renderContent();
    }

    function cancelEdit(eventIndex) {
        const event = itineraryData[currentDayIndex].events[eventIndex];
        // å¦‚æœæ˜¯å‰›æ–°å¢çš„(æ¨™é¡Œç‚ºç©ºæˆ–ç‰¹å®šæ¨™è¨˜)ï¼Œå–æ¶ˆæ™‚ç›´æ¥åˆªé™¤
        if (event.title === "æ–°è¡Œç¨‹" && event.time === "00:00") {
             itineraryData[currentDayIndex].events.splice(eventIndex, 1);
        } else {
            event.isEditing = false;
        }
        renderContent();
    }

    function saveEdit(eventIndex) {
        const time = document.getElementById('edit-time').value;
        const title = document.getElementById('edit-title').value;
        const note = document.getElementById('edit-note').value;

        itineraryData[currentDayIndex].events[eventIndex] = {
            ...itineraryData[currentDayIndex].events[eventIndex],
            time, title, note, isEditing: false
        };
        saveData();
    }

    function deleteItem(eventIndex) {
        if(confirm('ç¢ºå®šè¦åˆªé™¤é€™å€‹è¡Œç¨‹å—ï¼Ÿ')) {
            itineraryData[currentDayIndex].events.splice(eventIndex, 1);
            saveData();
        }
    }

    function addItem() {
        itineraryData[currentDayIndex].events.push({
            time: "00:00",
            title: "",
            note: "",
            type: "chill",
            isEditing: true
        });
        renderContent(); // é€™è£¡ä¸å­˜æª”ï¼Œç­‰ç”¨æˆ¶æŒ‰å„²å­˜
    }

    // å•Ÿå‹•ç¨‹å¼
    init();

</script>
</body>
</html>